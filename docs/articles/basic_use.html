<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic use • pubmedRecords</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic use">
<meta property="og:description" content="pubmedRecords">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pubmedRecords</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic_use.html">Basic use</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kamermanpr/pubmedRecords/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="basic_use_files/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="basic_use_files/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet">
<script src="basic_use_files/wordcloud2-0.0.1/wordcloud2-all.js"></script><script src="basic_use_files/wordcloud2-0.0.1/hover.js"></script><script src="basic_use_files/wordcloud2-binding-0.2.1/wordcloud2.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic use</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/kamermanpr/pubmedRecords/blob/HEAD/vignettes/basic_use.Rmd" class="external-link"><code>vignettes/basic_use.Rmd</code></a></small>
      <div class="hidden name"><code>basic_use.Rmd</code></div>

    </div>

    
    
<p>This package provides tools to download records from the NCBI PubMed
database based on user-specified search criteria, and to add CrossRef
citation data for the returned records. The output is in tidy data
format, facilitating downstream analysis using tools from the
‘tidyverse’.</p>
<p>This vignette illustrates the use of the package to download data for
an author from PubMed and the building a word-cloud from the titles of
their publications.</p>
<p>I will be using Prof Rolf-Detlef Treede, a renowned scientist in the
field of pain research, in this example.</p>
<div class="section level3">
<h3 id="step-1">Step 1<a class="anchor" aria-label="anchor" href="#step-1"></a>
</h3>
<p>Load the packages required for this vignette.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="co"># devtools::install_github("kamermanpr/pubmedRecords")</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kamermanpr/pubmedRecords" class="external-link">pubmedRecords</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/tidytext" class="external-link">tidytext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lchiffon/wordcloud2" class="external-link">wordcloud2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2">Step 2<a class="anchor" aria-label="anchor" href="#step-2"></a>
</h3>
<p>Enter search parameters and perform a search using the
<code>get_records</code> function.</p>
<p>The function parameters are:</p>
<ul>
<li>
<p><strong>search_terms:</strong> A character string of terms that
define the scope of the PubMed database query. Boolean operators (AND,
OR, NOT) and search field tags may be used to create more complex search
criteria. Commonly used search fields tags include:</p>
<ul>
<li>[TI]: Word in title<br>
</li>
<li>[TIAB]: Word in title or abstract<br>
</li>
<li>[MH]: Medical Subject Heading (MeSH)<br>
</li>
<li>[AU]: Author name (e.g., Doe J)<br>
</li>
<li>[AD]: Author institutional affiliation<br>
</li>
<li>[TA]: Journal title (e.g., J Pain)<br>
For a full set of search fields tags: <a href="https://www.ncbi.nlm.nih.gov/books/NBK3827/#_pubmedhelp_Search_Field_Descriptions_and_" class="external-link">PubMed
search field tags</a>. Note that the article publication type, date
type, and date range are modified using the <em>pub_type</em>,
<em>date_type</em>, <em>min_date</em> and <em>max_date</em> arguments
below.</li>
</ul>
</li>
<li><p><strong>pub_type:</strong> A character string specifying the type
of publication the search must return. The default value is <em>‘journal
article’</em>. For more information: <a href="https://www.ncbi.nlm.nih.gov/books/NBK3827/table/pubmedhelp.T.publication_types/?report=objectonly" class="external-link">PubMed
article types</a>.</p></li>
<li><p><strong>min_date:</strong> A character string in the format
<em>‘YYYY/MM/DD’</em>, <em>‘YYYY/MM’</em> or <em>‘YYYY’</em> specifying
the starting date of the search. The default value is
<em>1966/01/01’</em>.</p></li>
<li><p><strong>max_date:</strong> A character string in the format
<em>‘YYYY/MM/DD’</em>, <em>‘YYYY/MM’</em> or <em>‘YYYY’</em> specifying
the end date of the search. The default value is
<code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code>.</p></li>
<li>
<p><strong>date_type:</strong> A character string specifying the
publication date type that is being specified in the search. Available
values are:</p>
<ul>
<li>PDAT: Date the article was published (default)<br>
</li>
<li>MDAT: Date the PubMed entry was modified.</li>
<li>EDAT: Date the entry was added to PubMed.</li>
</ul>
</li>
<li><p><strong>has_abstract:</strong> Logical specifying whether the
returned records should be limited to those records that have an
abstract. The default value is <em>TRUE</em>.</p></li>
<li><p><strong>api_key:</strong> An API character string obtained from
the users NBCI account. The key is not essential, but it specifying a
key gives substantially faster record query rates.</p></li>
</ul>
<p><strong>Returning the records can take a while if there are a lot of
records, so I suggest that you use <code>count_records</code> before
<code>get_records</code> (they use the same parameters) to check how
many record queries will be made before executing a
request</strong>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search for journal articles by RD Treede in the journal "PAIN" and </span></span>
<span><span class="co"># which were published between 1 January 2000 and 31 December 2018</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_records.html">get_records</a></span><span class="op">(</span>search_terms <span class="op">=</span> <span class="st">"Treede RD[AU] AND Pain[TA]"</span>,</span>
<span>            min_date <span class="op">=</span> <span class="st">'2000/01/01'</span>,</span>
<span>            max_date <span class="op">=</span> <span class="st">'2018/12/31'</span>,</span>
<span>            api_key <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># Add only if you have one (see documentation)</span></span>
<span>            pub_type <span class="op">=</span> <span class="st">'journal article'</span>,</span>
<span>            date_type <span class="op">=</span> <span class="st">'PDAT'</span><span class="op">)</span></span></code></pre></div>
<p>Have a quick look at the output.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print first 10 lines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1,933 × 12</span></span></span>
<span><span class="co">##    surname initi…¹ title journal status volume pages year_…² year_…³ pmid  doi  </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> zou     l       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> yu      k       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> fan     y       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> cao     s       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> liu     s       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> shi     l       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> li      l       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> yuan    h       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> yang    r       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> yi      z       the … acs ch… ppubl… 10     1318… 2019    2018    3047… 10.1…</span></span>
<span><span class="co">## <span style="color: #949494;"># … with 1,923 more rows, 1 more variable: abstract &lt;chr&gt;, and abbreviated</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   variable names ¹​initials, ²​year_published, ³​year_online</span></span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View structure</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1,933</span></span>
<span><span class="co">## Columns: 12</span></span>
<span><span class="co">## $ surname        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "zou", "yu", "fan", "cao", "liu", "shi", "li", "yuan", …</span></span>
<span><span class="co">## $ initials       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "l", "k", "y", "s", "s", "l", "l", "h", "r", "z", "y", …</span></span>
<span><span class="co">## $ title          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "the inhibition by guanfu base a of neuropathic pain me…</span></span>
<span><span class="co">## $ journal        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "acs chem neurosci", "acs chem neurosci", "acs chem neu…</span></span>
<span><span class="co">## $ status         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ppublish", "ppublish", "ppublish", "ppublish", "ppubli…</span></span>
<span><span class="co">## $ volume         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10", "10", "10", "10", "10", "10", "10", "10", "10", "…</span></span>
<span><span class="co">## $ pages          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1318-1325", "1318-1325", "1318-1325", "1318-1325", "13…</span></span>
<span><span class="co">## $ year_published <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2019", "2019", "2019", "2019", "2019", "2019", "2019",…</span></span>
<span><span class="co">## $ year_online    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2018", "2018", "2018", "2018", "2018", "2018", "2018",…</span></span>
<span><span class="co">## $ pmid           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "30475578", "30475578", "30475578", "30475578", "304755…</span></span>
<span><span class="co">## $ doi            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10.1021/acschemneuro.8b00399", "10.1021/acschemneuro.8…</span></span>
<span><span class="co">## $ abstract       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "activation of satellite glial cells (sgcs) in the dors…</span></span></code></pre>
<p>Each author of a paper is found on a separate row, with the rest of
the information duplicated down the authors of a given article. Making
each row a unique co-author record helps keep the data in a tidy format,
and makes filtering records by co-authors easier. The downside is that
the returned dataframe can be quite large because of all the duplicated
information.</p>
<hr>
<p>Although not essential for this example, you can added CrossRef
citation counts to the records using the <code>citation_metrics</code>
function. This function requires you to pass to it the output from
<code>get_records</code>.</p>
<p><strong>The addition of citations also can take a while if there are
a lot of records</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a column called "crossref_citations" to the first 6 observations</span></span>
<span><span class="va">df_citations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_citations.html">get_citations</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Joining, by = "pmid"</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View structure</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">df_citations</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 6</span></span>
<span><span class="co">## Columns: 13</span></span>
<span><span class="co">## $ surname            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "zou", "yu", "fan", "cao", "liu", "shi"</span></span>
<span><span class="co">## $ initials           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "l", "k", "y", "s", "s", "l"</span></span>
<span><span class="co">## $ title              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "the inhibition by guanfu base a of neuropathic pai…</span></span>
<span><span class="co">## $ journal            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "acs chem neurosci", "acs chem neurosci", "acs chem…</span></span>
<span><span class="co">## $ status             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ppublish", "ppublish", "ppublish", "ppublish", "pp…</span></span>
<span><span class="co">## $ volume             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10", "10", "10", "10", "10", "10"</span></span>
<span><span class="co">## $ pages              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1318-1325", "1318-1325", "1318-1325", "1318-1325",…</span></span>
<span><span class="co">## $ year_published     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2019", "2019", "2019", "2019", "2019", "2019"</span></span>
<span><span class="co">## $ year_online        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2018", "2018", "2018", "2018", "2018", "2018"</span></span>
<span><span class="co">## $ pmid               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 30475578, 30475578, 30475578, 30475578, 30475578, 3…</span></span>
<span><span class="co">## $ doi                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10.1021/acschemneuro.8b00399", "10.1021/acschemneu…</span></span>
<span><span class="co">## $ abstract           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "activation of satellite glial cells (sgcs) in the …</span></span>
<span><span class="co">## $ crossref_citations <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 11, 11, 11, 11, 11, 11</span></span></code></pre>
<hr>
</div>
<div class="section level3">
<h3 id="step-3">Step 3<a class="anchor" aria-label="anchor" href="#step-3"></a>
</h3>
<p>Now that we have the data we can generate the wordcloud from article
titles.</p>
<div class="section level4">
<h4 id="first-select-the-title-column">First, select the title column<a class="anchor" aria-label="anchor" href="#first-select-the-title-column"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">words</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># Select the title column</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># extract unique entries only</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="second-extract-2-ngrams">Second, extract 2-ngrams<a class="anchor" aria-label="anchor" href="#second-extract-2-ngrams"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_words</span> <span class="op">&lt;-</span> <span class="va">words</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">title</span>, token <span class="op">=</span> <span class="st">"ngrams"</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co"># Remove stopwords</span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html" class="external-link">separate</a></span><span class="op">(</span><span class="va">word</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'word1'</span>, <span class="st">'word2'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">word1</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">stop_words</span><span class="op">$</span><span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">word2</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">stop_words</span><span class="op">$</span><span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co"># Convert terms containing numerals to NA</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>word1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">word1</span>, <span class="st">'[0-9]'</span><span class="op">)</span>,</span>
<span>                         yes <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                         no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">word1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>word2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">word2</span>, <span class="st">'[0-9]'</span><span class="op">)</span>,</span>
<span>                          yes <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                          no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">word2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co"># Remove NA</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">word1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">word2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co"># Join word columns them back together to form 2-ngrams</span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unite.html" class="external-link">unite</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">word1</span>, <span class="va">word2</span>, sep <span class="op">=</span> <span class="st">' '</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="third-count-the-number-of-occurances-of-each-2-ngram">Third, count the number of occurances of each 2-ngram<a class="anchor" aria-label="anchor" href="#third-count-the-number-of-occurances-of-each-2-ngram"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ngram_count</span> <span class="op">&lt;-</span> <span class="va">tidy_words</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fourth-strip-out-the-top-100-2-ngrams-and-plot">Fourth, strip out the top 100 2-ngrams and plot<a class="anchor" aria-label="anchor" href="#fourth-strip-out-the-top-100-2-ngrams-and-plot"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">word_cloud</span> <span class="op">&lt;-</span> <span class="va">ngram_count</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>freq <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/pkg/wordcloud2/man/wordcloud2.html" class="external-link">wordcloud2</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">word_cloud</span>,</span>
<span>           fontFamily <span class="op">=</span> <span class="st">'arial'</span>,</span>
<span>           size <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>           color <span class="op">=</span> <span class="fu">tableau_color_pal</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">'Color Blind'</span><span class="op">)</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="wordcloud2 html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2c47791c01def5ddae3a" style="width:864px;height:672px;"></div>
<script type="application/json" data-for="htmlwidget-2c47791c01def5ddae3a">{"x":{"word":["neuropathic pain","quantitative sensory","sensory testing","evoked potentials","laser evoked","borderline personality","personality disorder","term potentiation","chronic pain","pain perception","pain patients","spinal cord","dorsal root","human surrogate","peripheral neuropathic","primary somatosensory","clinical practice","cord injury","cross sectional","dorsal horn","human subjects","legs syndrome","neurogenic hyperalgesia","nociceptive pathways","pain modulation","parasylvian cortex","primary sensory","rat dorsal","restless legs","root ganglion","sleep deprivation","somatosensory cortex","stress regulation","acetylsalicylic acid","central sensitization","clinical trials","complex regional","conditioned pain","dipole source","evoked potential","ganglion neurons","grading system","healthy human","healthy volunteers","horn neurons","human pain","human primary","injury pain","insular cortex","nociceptive primary","octanoyl dopamine","pain models","pain ratings","pain syndrome","pain thresholds","pilot study","potentiation ltp","receptor potential","regional pain","secondary hyperalgesia","somatosensory evoked","surrogate model","thoracolumbar fascia","transient receptor","acute kidney","brain potentials","cancer comparative","chronic local","chronic noncancer","chronic widespread","claims data","comparative analysis","construct validity","cord stimulation","current stimulation","cutaneous patch","deprivation related","differential effects","direct current","european countries","evoked brain","frequency stimulation","german research","grid recordings","heat induced","heat pain","human brain","human parasylvian","insensitive nociceptors","international spinal","kidney injury","laser stimuli","male rats","mechanical hyperalgesia","mechanical hypersensitivity","mechanical pain","modality specific","nmda receptor","nociceptive input","nociceptive system"],"freq":[38,18,18,16,13,11,11,8,7,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"fontFamily":"arial","fontWeight":"bold","color":["#1170aa","#fc7d0b","#a3acb9","#57606c","#5fa2ce","#c85200","#7b848f","#a3cce9","#ffbc79","#c8d0d9"],"minSize":0,"weightFactor":1.89473684210526,"backgroundColor":"white","gridSize":0,"minRotation":-0.785398163397448,"maxRotation":0.785398163397448,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Peter Kamerman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
